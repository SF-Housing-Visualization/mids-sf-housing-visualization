!function(t,e,n,r,a){var i=function(){return t.dispatcher}.bind(this);n.addGraph(function(){var t=n.models.multiBarHorizontalChart().x(function(t){return t.label}).y(function(t){return t.value}).margin({top:30,right:20,bottom:50,left:175}).showValues(!0).tooltips(!0).showControls(!0);return t.yAxis.tickFormat(e.format(",.2f")),e.select(a).datum(r).call(t),n.utils.windowResize(t.update),t},function(){e.selectAll(a+" .nv-bar").on("click",function(t){i().dispatch(t)})})}(window,d3,nv,window.data.sidebar,".sidebar svg"),function(t,e){var n=t.state=t.state||{};n.selected=n.selected={},n.selected.area=e}(window),function(t,e){var n=function(){return t.state}.bind(this),r=t.dispatcher=t.dispatcher||{},a=r.handlers=r.handlers||[];r.dispatch=function(t){var e=n();console.log("dispatching event",t,e);for(handler in a){var r=a[handler];console.log("calling handler",r,t,e),r(t,e)}return!0}.bind(this),r.register=function(t){a.push(t)}.bind(this)}(window),function(t,e,n,r){"use strict";function a(t){return"undefined"==typeof t}function i(t){return{fillColor:"#E3E3E3",weight:1,opacity:.4,color:"blue",fillOpacity:.3}}function o(t){return{weight:2,color:"#666",dashArray:"",fillOpacity:.7}}function s(t){return{weight:4,color:"#333",dashArray:"",fillOpacity:.9}}function l(t){console.log("entering area",t);var e=t.target;e.setStyle(o())}function c(t){console.log("exiting area",t);var e=t.target;e.setStyle(i())}function u(e){console.log("click in area",e);var n=e.target,r=n.feature.properties.NAME,a={label:r};h().dispatch(a,t.state)}function d(t,e){e.on({click:u,mouseover:l,mouseout:c});var n=e.feature.properties.NAME;m[n]=e}var h=function(){return t.dispatcher}.bind(this),f=function(){return t.data}.bind(this);n.Icon.Default.imagePath="images/";var p=n.map("map",{center:[52.5377,13.3958],zoom:4});new n.tileLayer("http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",{minZoom:0,maxZoom:18,attribution:'Map data Â© <a href="http://www.openstreetmap.org">OpenStreetMap contributors</a>'}).addTo(p);var g={},m=t.areas=g.areas=g.areas||{};t.setGeoJson=function(t){g.countries=f().countries=n.geoJson(t,{style:i,onEachFeature:d}).addTo(p)}.bind(this);var v=function(t,e){console.log("map handler",t,e),a(g.marker)||p.removeLayer(g.marker),a(g.highlight)||g.highlight.setStyle(i());var n=t.label,r=m[n];r.setStyle(s()),g.highlight=r}.bind(this);h().register(v)}(window,document,L);