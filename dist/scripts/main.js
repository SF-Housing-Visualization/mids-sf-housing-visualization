!function(e){e.data=e.data||{},e.data.sidebar=[{key:"Series 1",color:"#d67777",values:[{label:"Germany",value:-1.8746444827653},{label:"France",value:-8.0961543492239},{label:"Spain",value:-.57072943117674},{label:"Russia",value:-2.4174010336624},{label:"Italy",value:-.72009071426284},{label:"Ukraine",value:-.77154485523777},{label:"Sweden",value:-.90152097798131},{label:"Norway",value:-.91445417330854},{label:"Estonia",value:-.055746319141851}]},{key:"Series 2",color:"#4f99b4",values:[{label:"Germany",value:25.307646510375},{label:"France",value:16.756779544553},{label:"Spain",value:18.451534877007},{label:"Russia",value:8.6142352811805},{label:"Italy",value:7.8082472075876},{label:"Ukraine",value:5.259101026956},{label:"Sweden",value:.30947953487127},{label:"Norway",value:0},{label:"Estonia",value:0}]}]}(window),function(e,a,t,n,l){var r=function(){return e.dispatcher}.bind(this);t.addGraph(function(){var e=t.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:30,right:20,bottom:50,left:175}).showValues(!0).tooltips(!0).showControls(!0);return e.yAxis.tickFormat(a.format(",.2f")),a.select(l).datum(n).call(e),t.utils.windowResize(e.update),e},function(){a.selectAll(l+" .nv-bar").on("click",function(e){r().dispatch(e)})})}(window,d3,nv,window.data.sidebar,".sidebar svg"),function(e,a){var t=e.state=e.state||{};t.selected=t.selected={},t.selected.area=a}(window),function(e,a){var t=function(){return e.state}.bind(this),n=e.dispatcher=e.dispatcher||{},l=n.handlers=n.handlers||[];n.dispatch=function(e){var a=t();console.log("dispatching event",e,a);for(handler in l){var n=l[handler];console.log("calling handler",n,e,a),n(e,a)}return!0}.bind(this),n.register=function(e){l.push(e)}.bind(this)}(window),function(e,a){var t=e.data=e.data||{},n=t.map=t.map||{};n.Germany=[52.5,13.4],n.France=[48.9,2.4],n.Spain=[40.4,-3.7],n.Russia=[55.7,37.6],n.Italy=[41.9,12.5],n.Ukraine=[50.5,30.5],n.Sweden=[59.3,18],n.Norway=[60,10.8],n.Estonia=[59.4,24.7]}(window),function(e,a,t,n){"use strict";function l(e){return"undefined"==typeof e}function r(e){return{fillColor:"#E3E3E3",weight:1,opacity:.4,color:"blue",fillOpacity:.3}}function i(e){return{weight:2,color:"#666",dashArray:"",fillOpacity:.7}}function o(e){return{weight:4,color:"#333",dashArray:"",fillOpacity:.9}}function s(e){console.log("entering area",e);var a=e.target;a.setStyle(i())}function u(e){console.log("exiting area",e);var a=e.target;a.setStyle(r())}function c(a){console.log("click in area",a);var t=a.target,n=t.feature.properties.NAME,l={label:n};h().dispatch(l,e.state)}function d(e,a){a.on({click:c,mouseover:s,mouseout:u});var t=a.feature.properties.NAME;p[t]=a}var h=function(){return e.dispatcher}.bind(this),v=function(){return e.data}.bind(this);t.Icon.Default.imagePath="images/";var f=t.map("map",{center:[52.5377,13.3958],zoom:4});new t.tileLayer("http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",{minZoom:0,maxZoom:18,attribution:'Map data Â© <a href="http://www.openstreetmap.org">OpenStreetMap contributors</a>'}).addTo(f);var b={},p=e.areas=b.areas=b.areas||{};e.setGeoJson=function(e){b.countries=v().countries=t.geoJson(e,{style:r,onEachFeature:d}).addTo(f)}.bind(this);var g=function(e,a){console.log("map handler",e,a),l(b.marker)||f.removeLayer(b.marker),l(b.highlight)||b.highlight.setStyle(r());var t=e.label,n=p[t];n.setStyle(o()),b.highlight=n}.bind(this);h().register(g)}(window,document,L);